@import utils.navigation.NavigationComponent
@import security.LoginState.User
@import controllers.routes.PersonController
@import controllers.FlashKey.DeletedPerson
@import controllers.FlashKey.DeletedToken
@import controllers.FlashKey.PersonNotFound
@import controllers.FlashKey.PersonAdded
@import controllers.FlashKey.PersonUpdated
@import helper.CSRF

@(
    machine: Machine,
    entries: Seq[(Qualification, Option[Person])]
)(
    implicit navigation: NavigationComponent,
    user: User,
    request: RequestHeader,
    flash: Flash
)

@keys = @{ Seq(PersonAdded, PersonUpdated).map(flash.get(_).getOrElse("").toString) }

@main(userOpt = Some(user), title = "List qualified people for \"" + machine.comment.get + "\"") {
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
            <tr>
                <th>Database ID</th>
                <th>Member ID</th>
                <th>Name</th>
                <th>E-Mail</th>
                <th>Qualification comment</th>
            </tr>
            </thead>
            <tbody>@for(entry <- entries) {
                @if(entry._2.isDefined) {
                    @defining(entry._2.get) { person =>
                        <tr>
                            <td>@person.id</td>
                            <td>@person.memberId</td>
                            <td>@person.name</td>
                            <td>@person.email</td>
                            <td>@entry._1.comment</td>
                        </tr>
                    }
                }
            }</tbody>
        </table>
    </div>
}
