{% extends base_template %}
{% load i18n %}

{% block title %}
{% with name=person %}{% blocktrans %}Access Log for {{ name }}{% endblocktrans %}{% endwith %}
{% endblock %}

{% block top_actions %}
<a href="{% url 'people:detail' person.pk %}" class="btn btn-outline-primary">{% trans "Go to person" %}</a>
{% endblock %}
{% block bottom_actions %}
{% endblock %}

{% block content %}
<div id="list_container">
    {% if is_partial %}
    <h4>{% trans "Access Log" %}</h4>
    {% endif %}
    {% if object_list %}
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>{% trans "Date" %}</th>
                <th>{% trans "Machine" %}</th>
                <th>{% trans "Token" %}</th>
                <th>{% trans "Action" %}</th>
            </tr>
            </thead>
    {% for object in object_list %}
    <tr>
        <td>{% include "snippets/timestamp.html" with timestamp=object.timestamp %}</td>
        <td><a href="{% url 'machines:detail' object.machine.pk %}">{{ object.machine }}</a></td>
        <td>{% include "token_cell.html" with token=object.token %}</td>
        <td>{{ object.get_type_display }}</td>
    </tr>
    {% endfor %}
    </table>
    {% include "base_pagination.html" %}
    {% else %}
    <div class="alert alert-secondary text-center">{% trans "This person has not accessed anything yet." %}</div>
    {% endif%}
</div>
{% endblock %}